<!--
@license
Copyright Â© HatioLab Inc. All rights reserved.
-->

<link rel="import" href="../polymer/polymer-element.html">

<link rel="import" href="./things-scene-property.html">

<dom-module id="things-scene-layer">
  <template>
    <content select="things-scene-property"></content>
  </template>

  <script>
    /**
     * `things-scene-layer`
     * Polymer component to add layer to the things-scene-viewer.
     * 
     * Example:
     * <things-scene-viewer>
     *   <things-scene-layer type="shift-layer"/>
     *   <things-scene-layer type="confidential-overlay" model="[[confidential]]"/>
     * </things-scene-viewer>
     * 
     * @customElement
     * @polymer
     * @demo demo/index.html
     * @hero hero.svg
     */
    class ThingsSceneLayer extends Polymer.Element {

      static get is() { return 'things-scene-layer'; }

      static get properties() {
        return {
          type: String,
          text: String
        }
      }

      getModel() {
        var model = {
          type: this.type
        }

        model = Array.from(this.querySelectorAll('things-scene-property'))
        .reduce(function(model, property) {
          var value = property.value

          if(property.name) {
            switch(property.type) {
            case 'number':
              value = Number(value);
              break;
            case 'boolean':
              value = Boolean(value);
              break;
            default:
            }

            model[property.name] = value
          }

          return model
        }, model)

        return model;
      }

    }

    window.customElements.define(ThingsSceneLayer.is, ThingsSceneLayer);
  </script>
</dom-module>
